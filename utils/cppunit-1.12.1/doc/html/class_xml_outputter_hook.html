<html>
<head>
<title>
CppUnit - The Unit Testing Library
</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>

<body bgcolor="#ffffff"> 
<table width="100%">
  <tr>
    <td width="40%" align="left" valign="center">
      <a href="http://sourceforge.net/projects/cppunit">
      CppUnit project page
      </a>
    </td>
    <td>
      <a href="FAQ">FAQ</a>
    </td>
    <td width="40%" align="right" valign="center">
      <a href="http://cppunit.sourceforge.net">CppUnit home page</a>
    </td>
  </tr>
</table>

<hr>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>XmlOutputterHook Class Reference</h1><!-- doxytag: class="XmlOutputterHook" -->Hook to customize Xml output.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_xml_outputter_hook_8h-source.html">XmlOutputterHook.h</a>&gt;</code>
<p>
<a href="class_xml_outputter_hook-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xml_outputter_hook.html#35d3cc333991efbf9a6365fefc93ed46">beginDocument</a> (<a class="el" href="class_xml_document.html">XmlDocument</a> *document)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xml_outputter_hook.html#fa02a81666ef87974cabc94981724000">endDocument</a> (<a class="el" href="class_xml_document.html">XmlDocument</a> *document)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xml_outputter_hook.html#ba4c8b38c5a96e5bf4e3a60303169581">failTestAdded</a> (<a class="el" href="class_xml_document.html">XmlDocument</a> *document, <a class="el" href="class_xml_element.html">XmlElement</a> *testElement, <a class="el" href="class_test.html">Test</a> *test, <a class="el" href="class_test_failure.html">TestFailure</a> *failure)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xml_outputter_hook.html#a50aa698854c504b7f86b4a14bfabe4d">successfulTestAdded</a> (<a class="el" href="class_xml_document.html">XmlDocument</a> *document, <a class="el" href="class_xml_element.html">XmlElement</a> *testElement, <a class="el" href="class_test.html">Test</a> *test)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xml_outputter_hook.html#62de92c797907f3ae927a41a587539d9">statisticsAdded</a> (<a class="el" href="class_xml_document.html">XmlDocument</a> *document, <a class="el" href="class_xml_element.html">XmlElement</a> *statisticsElement)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_xml_outputter_hook.html#9db898b399bf21f2d0716a1dfa0bef92">~XmlOutputterHook</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Hook to customize Xml output. 
<p>
<a class="el" href="class_xml_outputter_hook.html">XmlOutputterHook</a> can be passed to <a class="el" href="class_xml_outputter.html">XmlOutputter</a> to customize the <a class="el" href="class_xml_document.html">XmlDocument</a>.<p>
Common customizations are:<ul>
<li>adding some datas to successfull or failed test with <a class="el" href="class_xml_outputter_hook.html#ba4c8b38c5a96e5bf4e3a60303169581">failTestAdded()</a> and <a class="el" href="class_xml_outputter_hook.html#a50aa698854c504b7f86b4a14bfabe4d">successfulTestAdded()</a>,</li><li>adding some statistics with <a class="el" href="class_xml_outputter_hook.html#62de92c797907f3ae927a41a587539d9">statisticsAdded()</a>,</li><li>adding other datas with <a class="el" href="class_xml_outputter_hook.html#35d3cc333991efbf9a6365fefc93ed46">beginDocument()</a> or <a class="el" href="class_xml_outputter_hook.html#fa02a81666ef87974cabc94981724000">endDocument()</a>.</li></ul>
<p>
See examples/ClockerPlugIn which makes use of most the hook.<p>
Another simple example of an outputter hook is shown below. It may be used to add some meta information to your result files. In the example, the author name as well as the project name and test creation date is added to the head of the xml file.<p>
In order to make this information stored within the xml file, the virtual member function <a class="el" href="class_xml_outputter_hook.html#35d3cc333991efbf9a6365fefc93ed46">beginDocument()</a> is overriden where a new <a class="el" href="class_xml_element.html">XmlElement</a> object is created.<p>
This element is simply added to the root node of the document which makes the information automatically being stored when the xml file is written.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;<a class="code" href="_xml_outputter_hook_8h.html">cppunit/XmlOutputterHook.h</a>&gt;</span>
<span class="preprocessor"> #include &lt;cppunit/XmlElement.h&gt;</span>
<span class="preprocessor"> #include &lt;<a class="code" href="_string_tools_8h.html">cppunit/tools/StringTools.h</a>&gt;</span>
 
 ...
 
 <span class="keyword">class </span>MyXmlOutputterHook : <span class="keyword">public</span> CppUnit::<a class="code" href="class_xml_outputter_hook.html">XmlOutputterHook</a>
 {
 <span class="keyword">public</span>:
   MyXmlOutputterHook(<span class="keyword">const</span> std::string projectName,
                      <span class="keyword">const</span> std::string author)
   {
      m_projectName = projectName;
      m_author      = author;
   };
 
   <span class="keyword">virtual</span> ~MyXmlOutputterHook()
   {
   };
 
   <span class="keywordtype">void</span> <a class="code" href="class_xml_outputter_hook.html#35d3cc333991efbf9a6365fefc93ed46">beginDocument</a>(CppUnit::XmlDocument* document)
   {
     <span class="keywordflow">if</span> (!document)
       <span class="keywordflow">return</span>;

     <span class="comment">// dump current time</span>
     std::string szDate          = CppUnit::StringTools::toString( (<span class="keywordtype">int</span>)time(0) );
     CppUnit::XmlElement* metaEl = <span class="keyword">new</span> CppUnit::XmlElement(<span class="stringliteral">"SuiteInfo"</span>, 
                                                           <span class="stringliteral">""</span>);

     metaEl-&gt;addElement( <span class="keyword">new</span> CppUnit::XmlElement(<span class="stringliteral">"Author"</span>, m_author) );
     metaEl-&gt;addElement( <span class="keyword">new</span> CppUnit::XmlElement(<span class="stringliteral">"Project"</span>, m_projectName) );
     metaEl-&gt;addElement( <span class="keyword">new</span> CppUnit::XmlElement(<span class="stringliteral">"Date"</span>, szDate ) );
    
     document-&gt;rootElement().addElement(metaEl);
   };
 <span class="keyword">private</span>:
   std::string m_projectName;
   std::string m_author;
 }; 
</pre></div><p>
Within your application's main code, you need to snap the hook object into your xml outputter object like shown below:<p>
<div class="fragment"><pre class="fragment"> <a class="code" href="namespace_mfc_ui.html#3a4ec878eeabf61031214f1c6ac27998">CppUnit::TextUi::TestRunner</a> runner;
 std::ofstream outputFile(<span class="stringliteral">"testResults.xml"</span>);
 
 CppUnit::XmlOutputter* outputter = <span class="keyword">new</span> CppUnit::XmlOutputter( &amp;runner.result(),
                                                               outputFile );    
 MyXmlOutputterHook hook(<span class="stringliteral">"myProject"</span>, <span class="stringliteral">"meAuthor"</span>);
 outputter-&gt;addHook(&amp;hook);
 runner.setOutputter(outputter);    
 runner.addTest( VectorFixture::suite() );   
 runner.run();
 outputFile.close();
</pre></div><p>
This results into the following output:<p>
<div class="fragment"><pre class="fragment"> &lt;TestRun&gt;
   &lt;suiteInfo&gt;
     &lt;author&gt;meAuthor&lt;/author&gt;
     &lt;project&gt;myProject&lt;/project&gt;
     &lt;date&gt;1028143912&lt;/date&gt;
   &lt;/suiteInfo&gt;
   &lt;FailedTests&gt;
    ...
</pre></div><p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="class_xml_outputter.html">XmlOutputter</a>, <a class="el" href="struct_cpp_unit_test_plug_in.html">CppUnitTestPlugIn</a>. </dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="9db898b399bf21f2d0716a1dfa0bef92"></a><!-- doxytag: member="XmlOutputterHook::~XmlOutputterHook" ref="9db898b399bf21f2d0716a1dfa0bef92" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual XmlOutputterHook::~XmlOutputterHook           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="35d3cc333991efbf9a6365fefc93ed46"></a><!-- doxytag: member="XmlOutputterHook::beginDocument" ref="35d3cc333991efbf9a6365fefc93ed46" args="(XmlDocument *document)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPPUNIT_NS_BEGIN void XmlOutputterHook::beginDocument           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_xml_document.html">XmlDocument</a> *&nbsp;</td>
          <td class="paramname"> <em>document</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called before any elements is added to the root element. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>document</em>&nbsp;</td><td>XML Document being created. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fa02a81666ef87974cabc94981724000"></a><!-- doxytag: member="XmlOutputterHook::endDocument" ref="fa02a81666ef87974cabc94981724000" args="(XmlDocument *document)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XmlOutputterHook::endDocument           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_xml_document.html">XmlDocument</a> *&nbsp;</td>
          <td class="paramname"> <em>document</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called after adding all elements to the root element. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>document</em>&nbsp;</td><td>XML Document being created. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ba4c8b38c5a96e5bf4e3a60303169581"></a><!-- doxytag: member="XmlOutputterHook::failTestAdded" ref="ba4c8b38c5a96e5bf4e3a60303169581" args="(XmlDocument *document, XmlElement *testElement, Test *test, TestFailure *failure)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XmlOutputterHook::failTestAdded           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_xml_document.html">XmlDocument</a> *&nbsp;</td>
          <td class="paramname"> <em>document</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_xml_element.html">XmlElement</a> *&nbsp;</td>
          <td class="paramname"> <em>testElement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_test.html">Test</a> *&nbsp;</td>
          <td class="paramname"> <em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_test_failure.html">TestFailure</a> *&nbsp;</td>
          <td class="paramname"> <em>failure</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called after adding a fail test element. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>document</em>&nbsp;</td><td>XML Document being created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>testElement</em>&nbsp;</td><td>&lt;FailedTest&gt; element. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test</em>&nbsp;</td><td><a class="el" href="class_test.html">Test</a> that failed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>failure</em>&nbsp;</td><td><a class="el" href="class_test.html">Test</a> failure data. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="62de92c797907f3ae927a41a587539d9"></a><!-- doxytag: member="XmlOutputterHook::statisticsAdded" ref="62de92c797907f3ae927a41a587539d9" args="(XmlDocument *document, XmlElement *statisticsElement)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XmlOutputterHook::statisticsAdded           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_xml_document.html">XmlDocument</a> *&nbsp;</td>
          <td class="paramname"> <em>document</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_xml_element.html">XmlElement</a> *&nbsp;</td>
          <td class="paramname"> <em>statisticsElement</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called after adding the statistic element. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>document</em>&nbsp;</td><td>XML Document being created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>statisticsElement</em>&nbsp;</td><td>&lt;Statistics&gt; element. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a50aa698854c504b7f86b4a14bfabe4d"></a><!-- doxytag: member="XmlOutputterHook::successfulTestAdded" ref="a50aa698854c504b7f86b4a14bfabe4d" args="(XmlDocument *document, XmlElement *testElement, Test *test)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XmlOutputterHook::successfulTestAdded           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_xml_document.html">XmlDocument</a> *&nbsp;</td>
          <td class="paramname"> <em>document</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_xml_element.html">XmlElement</a> *&nbsp;</td>
          <td class="paramname"> <em>testElement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_test.html">Test</a> *&nbsp;</td>
          <td class="paramname"> <em>test</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called after adding a successful test element. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>document</em>&nbsp;</td><td>XML Document being created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>testElement</em>&nbsp;</td><td>&lt;<a class="el" href="class_test.html">Test</a>&gt; element. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test</em>&nbsp;</td><td><a class="el" href="class_test.html">Test</a> that was successful. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_xml_outputter_hook_8h-source.html">XmlOutputterHook.h</a><li><a class="el" href="_xml_outputter_hook_8cpp.html">XmlOutputterHook.cpp</a></ul>
<hr>
<table width="100%">
  <tr>
    <td width="10%" align="left" valign="center">
      <a href="http://sourceforge.net"> 
      <img
      src="http://sourceforge.net/sflogo.php?group_id=11795"
      width="88" height="31" border="0" alt="SourceForge Logo"></a>
    </td>
    <td width="20%" align="left" valign="center">
      hosts this site.
    </td>
    <td>
    </td>
    <td align="right" valign="center">
      Send comments to:<br>
      <a href="mailto:cppunit-devel@lists.sourceforge.net">CppUnit Developers</a>
    </td>
  </tr>
</table>

</body> 
</html>
