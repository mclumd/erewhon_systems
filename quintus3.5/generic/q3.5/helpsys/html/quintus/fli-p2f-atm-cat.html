<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang="en">
<head>
<title>Quintus Prolog</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Quintus Prolog">
<meta name="generator" content="makeinfo 4.3">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
<link href="texinfo.css" rel="stylesheet" type="text/css">
</head>
<body>

<h5 class="subsubsection">Passing Atoms in Canonical Form</h5>

   <p>This section deals with passing atoms in canonical form, that is, as unsigned
integers.

<pre class="example">     Prolog:  +atom
     C:       QP_atom x;
     Pascal:  x: integer
     FORTRAN: integer x
     </pre>

   <p>The argument must be instantiated to an atom, otherwise the call will
   signal an error. 
   An unsigned integer representing the Prolog atom is passed to the
   foreign function.  Atoms can be converted to strings through the
   functions <code>QP_string_from_atom()</code> or <code>QP_padded_string_from_atom()</code>
   (see <a href="fli-p2f-atm-a2s.html#fli-p2f-atm-a2s">fli-p2f-atm-a2s</a>).

<pre class="example">     Prolog:  -atom
     C:       QP_atom *x
              *x = ...
     Pascal:  var x: integer
              x := ...
     FORTRAN: integer x
              x = ...
     </pre>

   <p>A pointer to an unsigned integer is passed to the function.   It is
   assumed that the function will overwrite this unsigned integer with
   its result.   This result should be a canonical
   representation of    an atom already obtained from Prolog, or one
   generated through the function <code>QP_atom_from_string()</code> or the function
   <code>QP_atom_from_padded_string()</code> (see
   <a href="fli-p2f-atm-a2s.html#fli-p2f-atm-a2s">fli-p2f-atm-a2s</a>).   Returning an
   arbitrary    integer will have undefined results.    When the foreign
   function    returns, the    atom represented by the unsigned integer
   being pointed to is unified with the corresponding argument of the Prolog
   call.    The    argument can be of any    type; if it cannot be unified
   with the returned    atom,  the call fails.    If the foreign
   function does not overwrite    the unsigned integer, the result
   is undefined.

<pre class="example">     Prolog:  [-atom]
     C:       QP_atom f(...)
                {
                  QP_atom x;
                  return x;
                }
     Pascal:  function f(...): integer;
                var x: integer;
                begin
                  f = x;
                end
     FORTRAN: integer function f(...)
                integer x
                f = x
              end
     </pre>

   <p>No argument is passed to the foreign function.   The return value from
   the function is    assumed to be an unsigned integer, which should be a
   canonical representation of an atom already obtained from Prolog, or one
   generated by one of the functions <code>QP_atom_from_string()</code> or
   <code>QP_atom_from_padded_string()</code> (see
   <a href="fli-p2f-atm-a2s.html#fli-p2f-atm-a2s">fli-p2f-atm-a2s</a>).   Returning    an
   arbitrary integer will have undefined results.   The atom represented
   by the unsigned integer is unified with the corresponding argument of
   the Prolog call.    The argument can be of any type; if it cannot be
   unified with the returned atom, the call fails.

<div class="logo">
<a href="http://www.sics.se/quintus/">
<table><tr><td>&nbsp;</td></tr></table>
</a>
</div>
<div class="node">
<ul class="node">
<li><a href="index.html#Top">User's Manual</a>
<hr>
<li><a href="index.html#TOC">Table of Contents</a>
<li><a rel="next" accesskey="n" href="fli-p2f-atm-spc.html#fli-p2f-atm-spc">Next</a>
<li><a rel="up" accesskey="u" href="fli-p2f-atm.html#fli-p2f-atm">Up</a>
</ul>
</div>
   </body></html>

