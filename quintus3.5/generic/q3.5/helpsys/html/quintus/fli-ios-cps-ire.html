<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang="en">
<head>
<title>Quintus Prolog</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Quintus Prolog">
<meta name="generator" content="makeinfo 4.3">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
<link href="texinfo.css" rel="stylesheet" type="text/css">
</head>
<body>

<h5 class="subsubsection">Initialize and Register The Created Stream</h5>

   <p>The fields of <code>QP_stream</code> structure used internally by the Prolog system
are initialized through <code>QP_prepare_stream()</code>.  It should be called
after other fields in <code>QP_stream</code> are properly set up. 
<code>QP_prepare_stream()</code> takes a pointer to <code>QP_stream</code> as its first parameter
and the address of the input/output buffer for the stream as its
second parameter.

   <p><code>QP_register_stream()</code> is then called to register the
user-defined stream so that the stream can be used in Prolog code. 
In our example, if the registration fails the bottom layer function
is used to close the opened file and deallocate the memory space for
the created stream and a null stream is returned.
<pre class="example">             QP_prepare_stream(&amp;stream-&gt;qpinfo, stream-&gt;buffer);
             if (QP_register_stream(&amp;stream-&gt;qpinfo) == QP_ERROR)
             {   (void) stream-&gt;qpinfo.close(&amp;stream-&gt;qpinfo);
                 *error_num = QP_errno;
                 return QP_NULL_STREAM;
             }
     </pre>

<div class="logo">
<a href="http://www.sics.se/quintus/">
<table><tr><td>&nbsp;</td></tr></table>
</a>
</div>
<div class="node">
<ul class="node">
<li><a href="index.html#Top">User's Manual</a>
<hr>
<li><a href="index.html#TOC">Table of Contents</a>
<li><a rel="next" accesskey="n" href="fli-ios-cps-tty.html#fli-ios-cps-tty">Next</a>
<li><a rel="previous" accesskey="p" href="fli-ios-cps-sqs.html#fli-ios-cps-sqs">Previous</a>
<li><a rel="up" accesskey="u" href="fli-ios-cps.html#fli-ios-cps">Up</a>
</ul>
</div>
   </body></html>

