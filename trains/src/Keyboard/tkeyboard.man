.\" Time-stamp: <96/10/09 17:29:43 ferguson>
.TH TKEYBOARD 1 "9 Oct 1996" "TRAINS Project"
.SH NAME
tkeyboard \- TRAINS Keyboard Manager
.SH SYNOPSIS
.IP tkeyboard 10
[\-rows\ N] [\-columns\ N] [\-bufnum\ N]
[\-grab\ BOOL] [\-hotkey\ STR] [\-showMenus\ BOOL]
[\-fontpat\ STR] [\-fontsize\ N]
[\-debug\ where] [X\ args]
.SH DESCRIPTION
.PP
.I Tkeyboard
is the TRAINS Keyboard Manager. It provides an X/Motif window into
which the user can type. Typed input is incrementally output to
standard output as KQML messages. It also provides a "hotkey" to allow
speech recognition to be stopped and started using the keyboard,
thereby freeing up the mouse for concurrent graphical gestures.
.SH OPTIONS
.PP
.IP "-rows N"
Number of rows for Keyboard Manager window (default 7).
.IP "-columns N"
Number of columns for Keyboard Manager window (default 80).
.IP "-bufnum N"
Specify that the last
.I N
words of the user's input should not be output (until Return is
typed). This allows the user to make corrections locally without the
need for a BACKTO message. The default is 2.
.IP "-grab BOOL"
Enable (True) or disable (False) the initial keyboard grab. The
default is True. See USAGE below for more details.
.IP "-hotkey STR"
Set the "hotkey" used to control speech recognition. The
.I STR
should be the name of an X11 KeySym, such as "a" (not a good choice,
however) or "Alt_L" (the default). Be careful when changing this since
most keys are either used in typed input and/or are auto-repeating.
.IP "-showMenus BOOL"
Enable (True) or disable (False) the display of the application
menubar. The default is True. Disabling it can be useful when screen
real estate is at a premium.
.IP "-fontpat STR"
Set the font pattern to the given
.IR STR ,
which should have a single "%d" in it representing the point size. The
default is a pattern representing Courier medium.
.IP "-fontsize N"
Set the initial font size to
.IR N .
The default is 14.
.IP "-debug where"
Specify that copious debugging information should be written to
.IR where .
If
.I where
is a hyphen ("-"), output is to stderr, if it starts with a pipe ("|")
the rest of the argument is passed to
.IR popen (3),
otherwise it is taken to be a filename to which to write. Be careful
to escape pipes and spaces from the shell.
.IP "X args"
.I Tkeyboard
accepts all standard X Toolkit arguments; see
.IR X (1)
for details.
.SH USAGE
.PP
.I Tkeyboard
incrementally processes typed input and outputs words in a format
similar to the speech recognition modules
.IR tspeechin (1)
and
.IR tspeechpp (1).
.PP
Unless disabled with "-grab False",
.I tkeyboard
places an active grab on the user's keyboard, thereby allowing it to
receive keyboard events regardless of the location of the mouse
pointer. It automatically releases the grab when iconified, and
re-grabs when de-iconified. The Control menu provides items to grab or
ungrab the keyboard unconditionally.
.PP
In conjunction with the keyboard grabbing, a "hotkey" is defined
that, when pressed, generates a START request to the SPEECH-IN module
and when released generates a STOP request. The default hotkey is the
left Alt key, which is convenient since it does not auto-repeat and is
not used for typed input. Use of the hotkey allows the mouse pointer
to be used simultaneously in another window, for example the DISPLAY.
.SH "KEYBOARD MANAGER MESSAGES"
.PP
The following KQML messages are understood by the Keyboard Manager. They
should be addressed with ":receiver KEYBOARD". Case is insignificant outside
of strings. Whitespace between messages is ignored (but rigorously
enforced within messages according to the KQML spec).
.IP "(request :content (grab))"
Causes the Keyboard Manager to grab the user's keyboard.
.IP "(request :content (ungrab))"
Causes the Keyboard Manager to release its grab on the user's keyboard.
.IP "(request :content (reset))"
Clears the Keyboard Manager display and resets any word buffering.
.IP "(request :content (exit :status N))"
Requests that the Keyboard Manager exit with status
.I N
(default 0).
.IP "(request :content (hide\-window))"
Causes the Keyboard Manager display to iconify itself.
.IP "(request :content (show\-window))"
Causes the Keyboard Manager display to deiconify itself.
.IP "(request :content (start\-conversation :name N :lang L :sex S))"
Treated as a RESET followed by SHOW-WINDOW.
.IP "(request :content (end\-conversation)"
Treated as a HIDE-WINDOW.
.IP "(request :content (chdir DIR))"
Ignored.
.PP
The following messages are generated by
.I tkeyboard
as selective broadcasts during recognition.
.IP "(tell :content (word W :index (I1 I2)))"
Broadcast to announce a new word in the user's input. The :index
argument identifies the start and end position of the word, which can
in fact be several words as far as the parser is concerned, as in the
token ``COULDN'T''. Index positions start at 1. A single number I can
be given, implying ``(I\ I+1)''.
.IP "(tell :content (backto :index I))"
Broadcast to indicate that any words previously output at index I or
beyond (inclusive) were erased by the user.
.IP "(tell :content (end))"
Broadcast to announce that the user hit Return.
.SH ENVIRONMENT
.PP
DISPLAY			HOST:SCREEN for X server
.SH FILES
.PP
None.
.SH DIAGNOSTICS
.PP
Sometimes complains that a grab couldn't be obtained if, for example,
another application already had a grab on the keyboard (e.g., menus).
The whole grab thing is complicated.
.SH SEE ALSO
.PP
trains(1),
tim(1)
.SH BUGS
.PP
Grabs are annoying.
.SH AUTHOR
.PP
George Ferguson (ferguson@cs.rochester.edu).
